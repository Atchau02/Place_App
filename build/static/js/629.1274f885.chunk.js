"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[629],{629:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(43),a=n(323),i=n(789),o=n(244),s=n(347),l=n(626),c=n(863),u=n(356),d=n(962),p=n(662),f=n(886),h=n(579);const v=()=>{const e=(0,r.useContext)(f.c),{isLoading:t,error:n,sendRequest:v,clearError:m}=(0,p.x)(),[y,x]=(0,i.A)({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),g=(0,a.W6)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.A,{error:n,onClear:m}),(0,h.jsxs)("form",{className:"place-form",onSubmit:async t=>{t.preventDefault();try{const t=new FormData;t.append("title",y.inputs.title.value),t.append("description",y.inputs.description.value),t.append("address",y.inputs.address.value),t.append("image",y.inputs.image.value),await v("http://localhost:8080/api/places","POST",t,{Authorization:"Bearer "+e.token}),g.push("/")}catch(n){}},children:[t&&(0,h.jsx)(c.A,{asOverlay:!0}),(0,h.jsx)(o.A,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,d.B_)()],errorText:"Please enter a valid title.",onInput:x}),(0,h.jsx)(o.A,{id:"description",element:"textarea",label:"Description",validators:[(0,d.Ik)(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:x}),(0,h.jsx)(o.A,{id:"address",element:"input",type:"text",label:"Address",validators:[(0,d.B_)()],errorText:"Please enter a valid address.",onInput:x}),(0,h.jsx)(u.A,{id:"image",onInput:x,onErrorText:"Please provide an image."}),(0,h.jsx)(s.A,{type:"submit",disabled:!y.isValid,children:"ADD PLACE"})]})]})}},347:(e,t,n)=>{n.d(t,{A:()=>i});n(43);var r=n(582),a=n(579);const i=e=>e.href?(0,a.jsx)("a",{className:`button button--${e.size||"default"} ${e.inverse&&"button--inverse"} ${e.danger&&"button--danger"}`,href:e.href,children:e.children}):e.to?(0,a.jsx)(r.N_,{to:e.to,exact:e.exact,className:`button button--${e.size||"default"} ${e.inverse&&"button--inverse"} ${e.danger&&"button--danger"}`,children:e.children}):(0,a.jsx)("button",{className:`button button--${e.size||"default"} ${e.inverse&&"button--inverse"} ${e.danger&&"button--danger"}`,type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})},356:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(43),a=n(347),i=n(579);function o(e){const[t,n]=(0,r.useState)(),[o,s]=(0,r.useState)(),[l,c]=(0,r.useState)(),u=(0,r.useRef)();(0,r.useEffect)((()=>{if(!t)return;const e=new FileReader;e.onload=()=>{s(e.result)},e.readAsDataURL(t)}),[t]);return(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("input",{id:e.id,ref:u,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:t=>{let r,a=l;t.target.files||1===t.target.files.length?(r=t.target.files[0],n(r),c(!0),a=!0):(c(!1),a=!1),e.onInput(e.id,r,a)}}),(0,i.jsxs)("div",{className:`image-upload ${e.center&&"center"}`,children:[(0,i.jsxs)("div",{className:"image-upload__preview",children:[o&&(0,i.jsx)("img",{src:o,alt:"preview"}),!o&&(0,i.jsx)("p",{children:"Please pick an image."})]}),(0,i.jsx)(a.A,{type:"button",onClick:()=>{u.current.click()},children:"PICK IMAGE"})]}),!l&&(0,i.jsx)("p",{children:e.errorText})]})}},244:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(43),a=n(962),i=n(579);const o=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:(0,a.tf)(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}};function s(e){const[t,n]=(0,r.useReducer)(o,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:a,onInput:s}=e,{value:l,isValid:c}=t;(0,r.useEffect)((()=>{e.onInput(e.id,t.value,t.isValid)}),[a,s,l,c]);const u=t=>{n({type:"CHANGE",val:t.target.value,validators:e.validators})},d=()=>{n({type:"TOUCH"})},p="input"===e.element?(0,i.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:d,value:t.value}):(0,i.jsx)("textarea",{id:e.id,rows:e.row||3,onChange:u,onBlur:d,value:t.value});return(0,i.jsxs)("div",{className:`form-control ${!t.isValid&&t.isTouched&&"form-control--invalid"}`,children:[(0,i.jsx)("label",{htmlFor:e.id,children:e.label}),p,!t.isValid&&t.isTouched&&(0,i.jsx)("p",{children:e.errorText})]})}},626:(e,t,n)=>{n.d(t,{A:()=>o});n(43);var r=n(630),a=n(347),i=n(579);const o=e=>(0,i.jsx)(r.A,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,i.jsx)(a.A,{onClick:e.onClear,children:"Okay"}),children:(0,i.jsx)("p",{children:e.error})})},630:(e,t,n)=>{n.d(t,{A:()=>l});n(43);var r=n(950),a=n(336),i=n(6),o=n(579);function s(e){const t=(0,o.jsxs)("div",{className:`modal ${e.className}`,style:e.style,children:[(0,o.jsx)("header",{className:`modal__header ${e.headerClass}`,children:(0,o.jsx)("h2",{children:e.header})}),(0,o.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:e=>e.preventDefault(),children:[(0,o.jsx)("div",{className:`modal__content ${e.contentClass}`,children:e.children}),(0,o.jsx)("footer",{className:`modal__footer ${e.footerClass}`,children:e.footer})]})]});return r.createPortal(t,document.getElementById("modal-hook"))}function l(e){return(0,o.jsxs)(o.Fragment,{children:[e.show&&(0,o.jsx)(i.A,{onClick:e.onCancel}),(0,o.jsx)(a.A,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:(0,o.jsx)(s,{...e})})]})}},789:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(43);const a=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let n=!0;for(const r in e.inputs)e.inputs[r]&&(n=r===t.inputId?n&&t.isValid:n&&e.inputs[r].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:n};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}};function i(e,t){const[n,i]=(0,r.useReducer)(a,{inputs:e,isValid:t});return[n,(0,r.useCallback)(((e,t,n)=>{i({type:"INPUT_CHANGE",value:t,isValid:n,inputId:e})}),[]),(0,r.useCallback)(((e,t)=>{i({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},662:(e,t,n)=>{n.d(t,{x:()=>a});var r=n(43);const a=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),i=(0,r.useRef)([]),o=(0,r.useCallback)((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t(!0);const s=new AbortController;i.current.push(s);try{const a=await fetch(e,{method:n,body:r,headers:o,signal:s.signal}),l=await a.json();if(i.current=i.current.filter((e=>e!==s)),!a.ok)throw new Error(l.message);return t(!1),l}catch(l){throw a(l.message),t(!1),l}}),[]);return(0,r.useEffect)((()=>()=>{i.current.forEach((e=>e.abort()))}),[]),{isLoading:e,error:n,sendRequest:o,clearError:()=>{a(null)}}}},962:(e,t,n)=>{n.d(t,{B_:()=>s,Ik:()=>l,i$:()=>c,tf:()=>u});const r="REQUIRE",a="MINLENGTH",i="MAXLENGTH",o="EMAIL",s=()=>({type:r}),l=e=>({type:a,val:e}),c=()=>({type:o}),u=(e,t)=>{let n=!0;for(const s of t)s.type===r&&(n=n&&e.trim().length>0),s.type===a&&(n=n&&e.trim().length>=s.val),s.type===i&&(n=n&&e.trim().length<=s.val),"MIN"===s.type&&(n=n&&+e>=s.val),"MAX"===s.type&&(n=n&&+e<=s.val),s.type===o&&(n=n&&/^\S+@\S+\.\S+$/.test(e));return n}},323:(e,t,n)=>{function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=n(688),i=r(n(43)),o=n(321);n(173),n(620);var s=r(n(213));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}var p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createBrowserHistory(t.props),t}return c(t,e),t.prototype.render=function(){return i.createElement(a.Router,{history:this.history,children:this.props.children})},t}(i.Component),f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createHashHistory(t.props),t}return c(t,e),t.prototype.render=function(){return i.createElement(a.Router,{history:this.history,children:this.props.children})},t}(i.Component),h=function(e,t){return"function"==typeof e?e(t):e},v=function(e,t){return"string"==typeof e?o.createLocation(e,null,null,t):e},m=function(e){return e},y=i.forwardRef;void 0===y&&(y=m);var x=y((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,o=d(e,["innerRef","navigate","onClick"]),s=o.target,c=l({},o,{onClick:function(t){try{a&&a(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return c.ref=m!==y&&t||n,i.createElement("a",c)})),g=y((function(e,t){var n=e.component,r=void 0===n?x:n,c=e.replace,u=e.to,p=e.innerRef,f=d(e,["component","replace","to","innerRef"]);return i.createElement(a.__RouterContext.Consumer,null,(function(e){e||s(!1);var n=e.history,a=v(h(u,e.location),e.location),d=a?n.createHref(a):"",x=l({},f,{href:d,navigate:function(){var t=h(u,e.location),r=o.createPath(e.location)===o.createPath(v(t));(c||r?n.replace:n.push)(t)}});return m!==y?x.ref=t||p:x.innerRef=p,i.createElement(r,x)}))})),j=function(e){return e},b=i.forwardRef;void 0===b&&(b=j);var A=b((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,c=void 0===o?"active":o,u=e.activeStyle,p=e.className,f=e.exact,m=e.isActive,y=e.location,x=e.sensitive,A=e.strict,C=e.style,E=e.to,w=e.innerRef,N=d(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.createElement(a.__RouterContext.Consumer,null,(function(e){e||s(!1);var n=y||e.location,o=v(h(E,n),n),d=o.pathname,_=d&&d.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),k=_?a.matchPath(n.pathname,{path:_,exact:f,sensitive:x,strict:A}):null,I=!!(m?m(k,n):k),R="function"==typeof p?p(I):p,T="function"==typeof C?C(I):C;I&&(R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(R,c),T=l({},T,u));var V=l({"aria-current":I&&r||null,className:R,style:T,to:o},N);return j!==b?V.ref=t||w:V.innerRef=w,i.createElement(g,V)}))}));Object.defineProperty(t,"W6",{enumerable:!0,get:function(){return a.useHistory}})},213:e=>{var t="Invariant failed";e.exports=function(e,n){if(!e)throw new Error(t)}},620:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r=function(e,t){}}}]);
//# sourceMappingURL=629.1274f885.chunk.js.map